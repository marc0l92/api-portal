// Project: https://github.com/marc0l92/api-tools
import{a as H,b as ne,c as oe,d as ae,e as L}from"./chunk-UUZ2BTQ7.js";import"./chunk-7UA4BYCU.js";import{a as $,b as j,e as ce,f as ke}from"./chunk-H2K5MI4G.js";import{c as re,e as fe}from"./chunk-4GGLBHDJ.js";import"./chunk-KMHCSZEL.js";import{c as q,d as se}from"./chunk-T5NOOYNX.js";import{D as ee,F as te,I as U,J as Z,K as y,L as D,M as O,N as z,O as C,P as B,Q as T,R as le,S as ie,g as he,h as V,i as M,j as X,k as A,l as R,m as E,o as v,p as F,q as k,r as S,s as Y,t as b,u as P,v as w,x as I,y as d,z as x}from"./chunk-LVHWH4NH.js";function Se(i){F(i,"svelte-20lhhh",".diagram-image.svelte-20lhhh{width:auto;max-width:100%}.break-text.svelte-20lhhh{word-break:break-all}")}function me(i,t,e){let l=i.slice();return l[6]=t[e],l}function we(i){let t;return{c(){t=b("p"),t.textContent="The selected service has no request and no responses models",d(t,"class","notification is-warning")},m(e,l){k(e,t,l)},p:M,d(e){e&&S(t)}}}function ye(i){let t,e,l,r,m,n,c=i[0],s=[];for(let o=0;o<c.length;o+=1)s[o]=ue(me(i,c,o));function f(o,_){return o[1]?Ne:De}let h=f(i,-1),p=h(i);return{c(){t=b("div"),e=b("div"),l=b("aside"),r=b("ul");for(let o=0;o<s.length;o+=1)s[o].c();m=w(),n=b("div"),p.c(),d(r,"class","menu-list"),d(l,"class","menu"),d(e,"class","column is-one-third"),d(n,"class","column"),d(t,"class","columns")},m(o,_){k(o,t,_),v(t,e),v(e,l),v(l,r);for(let a=0;a<s.length;a+=1)s[a].m(r,null);v(t,m),v(t,n),p.m(n,null)},p(o,_){if(_&3){c=o[0];let a;for(a=0;a<c.length;a+=1){let u=me(o,c,a);s[a]?s[a].p(u,_):(s[a]=ue(u),s[a].c(),s[a].m(r,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=c.length}h===(h=f(o,_))&&p?p.p(o,_):(p.d(1),p=h(o),p&&(p.c(),p.m(n,null)))},d(o){o&&S(t),Y(s,o),p.d()}}}function ue(i){let t,e,l=i[6].name+"",r,m,n,c,s,f;function h(){return i[4](i[6])}return{c(){t=b("li"),e=b("a"),r=P(l),c=w(),d(e,"class",m="break-text "+(i[1]===i[6]?"is-active":"")+" svelte-20lhhh"),d(e,"href",n="#"+i[6].name)},m(p,o){k(p,t,o),v(t,e),v(e,r),v(t,c),s||(f=I(e,"click",h),s=!0)},p(p,o){i=p,o&1&&l!==(l=i[6].name+"")&&x(r,l),o&3&&m!==(m="break-text "+(i[1]===i[6]?"is-active":"")+" svelte-20lhhh")&&d(e,"class",m),o&1&&n!==(n="#"+i[6].name)&&d(e,"href",n)},d(p){p&&S(t),s=!1,f()}}}function De(i){let t;return{c(){t=b("p"),t.textContent="No diagram selected",d(t,"class","notification is-warning")},m(e,l){k(e,t,l)},p:M,d(e){e&&S(t)}}}function Ne(i){let t,e,l,r,m,n,c,s,f,h,p,o,_,a;return{c(){t=b("div"),e=b("div"),l=b("div"),r=b("textarea"),c=w(),s=b("div"),f=b("a"),h=b("figure"),p=b("img"),d(r,"class","textarea"),r.readOnly=m=!0,r.value=n=i[1].uml,d(l,"class","control"),d(e,"class","field"),d(t,"class","block"),d(p,"class","diagram-image svelte-20lhhh"),R(p.src,o=i[1].image)||d(p,"src",o),d(p,"alt",_=i[1].name),d(h,"class","image"),d(f,"href",a=i[1].image),d(f,"target","_blank"),d(f,"rel","noreferrer"),d(s,"class","block")},m(u,g){k(u,t,g),v(t,e),v(e,l),v(l,r),k(u,c,g),k(u,s,g),v(s,f),v(f,h),v(h,p)},p(u,g){g&2&&n!==(n=u[1].uml)&&(r.value=n),g&2&&!R(p.src,o=u[1].image)&&d(p,"src",o),g&2&&_!==(_=u[1].name)&&d(p,"alt",_),g&2&&a!==(a=u[1].image)&&d(f,"href",a)},d(u){u&&S(t),u&&S(c),u&&S(s)}}}function Oe(i){let t,e,l;function r(c,s){return c[0].length>0?ye:we}let m=r(i,-1),n=m(i);return{c(){t=b("div"),e=b("p"),e.innerHTML="<strong>Diagrams</strong>",l=w(),n.c(),d(e,"class","subtitle"),d(t,"class","box")},m(c,s){k(c,t,s),v(t,e),v(t,l),n.m(t,null)},p(c,[s]){m===(m=r(c,s))&&n?n.p(c,s):(n.d(1),n=m(c),n&&(n.c(),n.m(t,null)))},i:M,o:M,d(c){c&&S(t),n.d()}}}function ze(i,t,e){let l;E(i,H,f=>e(3,l=f));let{service:r=null}=t,m=[],n=null;function c(f,h){f&&h&&(e(0,m=L(f,h)),m.length>0&&e(1,n=m[0]))}let s=f=>{e(1,n=f)};return i.$$set=f=>{"service"in f&&e(2,r=f.service)},i.$$.update=()=>{if(i.$$.dirty&12){e:c(r,l)}},[m,n,r,l,s]}var G=class extends T{constructor(t){super(),B(this,t,ze,Oe,A,{service:2},Se)}},de=G;var J=he(ke());function pe(i){let t,e,l;return{c(){t=b("div"),e=b("progress"),d(e,"class","progress is-info is-small"),e.value=i[2],d(e,"max",l=i[0].length),d(t,"class","block")},m(r,m){k(r,t,m),v(t,e)},p(r,m){m&4&&(e.value=r[2]),m&1&&l!==(l=r[0].length)&&d(e,"max",l)},d(r){r&&S(t)}}}function Ce(i){let t,e,l,r,m,n,c,s,f,h,p,o,_=i[1]&&i[2]>=0&&pe(i);return{c(){t=b("div"),e=b("div"),l=b("button"),r=P("Download selected service"),n=w(),c=b("button"),s=P("Download all services"),h=w(),_&&_.c(),d(l,"class",m="button is-primary "+(i[1]?"is-loading":"")),l.disabled=i[1],d(c,"class",f="button is-primary "+(i[1]?"is-loading":"")),c.disabled=i[1],d(e,"class","block"),d(t,"class","box")},m(a,u){k(a,t,u),v(t,e),v(e,l),v(l,r),v(e,n),v(e,c),v(c,s),v(t,h),_&&_.m(t,null),p||(o=[I(l,"click",i[3]),I(c,"click",i[4])],p=!0)},p(a,[u]){u&2&&m!==(m="button is-primary "+(a[1]?"is-loading":""))&&d(l,"class",m),u&2&&(l.disabled=a[1]),u&2&&f!==(f="button is-primary "+(a[1]?"is-loading":""))&&d(c,"class",f),u&2&&(c.disabled=a[1]),a[1]&&a[2]>=0?_?_.p(a,u):(_=pe(a),_.c(),_.m(t,null)):_&&(_.d(1),_=null)},i:M,o:M,d(a){a&&S(t),_&&_.d(),p=!1,X(o)}}}function Me(i,t,e){let l;E(i,H,o=>e(7,l=o));let{apiName:r=""}=t,{services:m=[]}=t,{selectedService:n=null}=t,c=!1,s=-1;function f(o,_,a){return q(this,void 0,void 0,function*(){for(let u of _){o.file($(`${u.name}.plantuml`),u.uml);let g=yield fetch(u.image);g.ok&&o.file($(`${u.name}.${a}`),yield g.blob())}})}function h(){return q(this,void 0,void 0,function*(){if(e(1,c=!0),e(2,s=-1),n){let o=L(n,l),_=new J.default;yield f(_,o,l.format),yield j(r,_)}e(1,c=!1)})}function p(){return q(this,void 0,void 0,function*(){if(e(1,c=!0),e(2,s=0),m.length>0){let o=new J.default;for(let _ of m){let a=L(_,l);yield f(o,a,l.format),e(2,s++,s)}yield j(r,o)}e(1,c=!1)})}return i.$$set=o=>{"apiName"in o&&e(5,r=o.apiName),"services"in o&&e(0,m=o.services),"selectedService"in o&&e(6,n=o.selectedService)},[m,c,s,h,p,r,n]}var W=class extends T{constructor(t){super(),B(this,t,Me,Ce,A,{apiName:5,services:0,selectedService:6})}},ge=W;function Ae(i){F(i,"svelte-1gzs1yt",".hero.is-small.svelte-1gzs1yt .hero-body.svelte-1gzs1yt{padding-left:0;padding-right:0}")}function _e(i){let t,e,l;return e=new fe({props:{services:i[1],servicesSelectSize:1}}),e.$on("serviceSelect",i[5]),{c(){t=b("div"),O(e.$$.fragment),d(t,"class","box")},m(r,m){k(r,t,m),z(e,t,null),l=!0},p(r,m){let n={};m&2&&(n.services=r[1]),e.$set(n)},i(r){l||(y(e.$$.fragment,r),l=!0)},o(r){D(e.$$.fragment,r),l=!1},d(r){r&&S(t),C(e)}}}function ve(i){let t,e,l,r,m,n,c;return t=new de({props:{service:i[2]}}),r=new ae({}),n=new ge({props:{apiName:i[0].getName(),selectedService:i[2],services:i[1]}}),{c(){O(t.$$.fragment),e=w(),l=b("div"),O(r.$$.fragment),m=w(),O(n.$$.fragment),d(l,"class","box")},m(s,f){z(t,s,f),k(s,e,f),k(s,l,f),z(r,l,null),k(s,m,f),z(n,s,f),c=!0},p(s,f){let h={};f&4&&(h.service=s[2]),t.$set(h);let p={};f&1&&(p.apiName=s[0].getName()),f&4&&(p.selectedService=s[2]),f&2&&(p.services=s[1]),n.$set(p)},i(s){c||(y(t.$$.fragment,s),y(r.$$.fragment,s),y(n.$$.fragment,s),c=!0)},o(s){D(t.$$.fragment,s),D(r.$$.fragment,s),D(n.$$.fragment,s),c=!1},d(s){C(t,s),s&&S(e),s&&S(l),C(r),s&&S(m),C(n,s)}}}function Be(i){let t,e,l,r,m,n,c,s,f,h,p,o,_;t=new ie({props:{activePage:"apiToPlantUml"}}),n=new ce({}),n.$on("apiChange",i[4]);let a=i[1].length>0&&_e(i);f=new se({props:{messages:i[3]}});let u=i[2]&&ve(i);return o=new le({}),{c(){O(t.$$.fragment),e=w(),l=b("div"),r=b("section"),r.innerHTML=`<div class="hero-body svelte-1gzs1yt"><h1 class="title">Api to PlantUML</h1> 
      <p class="subtitle">Generate PlantUML diagram of REST API</p></div>`,m=w(),O(n.$$.fragment),c=w(),a&&a.c(),s=w(),O(f.$$.fragment),h=w(),u&&u.c(),p=w(),O(o.$$.fragment),d(r,"class","hero is-small svelte-1gzs1yt"),d(l,"class","container")},m(g,N){z(t,g,N),k(g,e,N),k(g,l,N),v(l,r),v(l,m),z(n,l,null),v(l,c),a&&a.m(l,null),v(l,s),z(f,l,null),v(l,h),u&&u.m(l,null),k(g,p,N),z(o,g,N),_=!0},p(g,[N]){g[1].length>0?a?(a.p(g,N),N&2&&y(a,1)):(a=_e(g),a.c(),y(a,1),a.m(l,s)):a&&(U(),D(a,1,1,()=>{a=null}),Z());let Q={};N&8&&(Q.messages=g[3]),f.$set(Q),g[2]?u?(u.p(g,N),N&4&&y(u,1)):(u=ve(g),u.c(),y(u,1),u.m(l,null)):u&&(U(),D(u,1,1,()=>{u=null}),Z())},i(g){_||(y(t.$$.fragment,g),y(n.$$.fragment,g),y(a),y(f.$$.fragment,g),y(u),y(o.$$.fragment,g),_=!0)},o(g){D(t.$$.fragment,g),D(n.$$.fragment,g),D(a),D(f.$$.fragment,g),D(u),D(o.$$.fragment,g),_=!1},d(g){C(t,g),g&&S(e),g&&S(l),C(n),a&&a.d(),C(f),u&&u.d(),g&&S(p),C(o,g)}}}function Te(i,t,e){let l=null,r=[],m=null,n=[];function c(f){return q(this,void 0,void 0,function*(){try{e(0,l=null),e(1,r=[]),e(2,m=null),e(3,n=[]);let h=f.detail.apiObject;h&&(e(0,l=re(h)),l.setModelsTitle(),yield l.resolveReferences(),e(1,r=l.getServices()),r.length===0&&e(3,n=[...n,"Warning: No services found"]))}catch(h){e(3,n=[...n,"Error: "+h.message])}})}function s(f){e(2,m=r[f.detail.selectedServiceIndex])}return ee(()=>{ne()}),te(()=>{oe()}),[l,r,m,n,c,s]}var K=class extends T{constructor(t){super(),B(this,t,Te,Be,A,{},Ae)}},be=K;new be({target:document.body});V();
