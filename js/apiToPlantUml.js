// Project: https://github.com/marc0l92/api-portal
import{a as I}from"./chunk-A2HIGA3G.js";import{a as ye}from"./chunk-DKCWGXES.js";import{b as _e}from"./chunk-CJ5DFQTS.js";import{d as pe,g as G,h as J,l as ge}from"./chunk-FBB6NL4I.js";import"./chunk-V4D3OYFB.js";import{a as de}from"./chunk-KTDVAK5P.js";import{$ as N,A as g,B as ee,C as S,D as w,E as te,F as v,G as E,H as D,J as H,M as d,N as le,R as ie,T as se,W as re,Y as ne,Z,_ as j,aa as y,ba as oe,ca as M,da as A,ea as L,fa as P,g as Oe,ga as F,h as B,ha as ae,ka as z,n as $,o as C,p as x,pa as R,qa as fe,r as T,ra as ce,s as U,sa as ue,t as q,ta as me}from"./chunk-HMIU6H2R.js";B();B();B();function Be(i){ee(i,"svelte-20lhhh",".diagram-image.svelte-20lhhh{width:auto;max-width:100%}.break-text.svelte-20lhhh{word-break:break-all}")}function ve(i,t,e){let l=i.slice();return l[6]=t[e],l}function Ce(i){let t;return{c(){t=v("p"),t.textContent="The selected service has no request and no responses models",d(t,"class","notification is-warning")},m(e,l){S(e,t,l)},p:C,d(e){e&&w(t)}}}function Me(i){let t,e,l,o,r,n,s=i[0],a=[];for(let f=0;f<s.length;f+=1)a[f]=be(ve(i,s,f));function u(f,_){return f[1]?Le:Ae}let k=u(i,-1),p=k(i);return{c(){t=v("div"),e=v("div"),l=v("aside"),o=v("ul");for(let f=0;f<a.length;f+=1)a[f].c();r=D(),n=v("div"),p.c(),d(o,"class","menu-list"),d(l,"class","menu"),d(e,"class","column is-one-third"),d(n,"class","column"),d(t,"class","columns")},m(f,_){S(f,t,_),g(t,e),g(e,l),g(l,o);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(o,null);g(t,r),g(t,n),p.m(n,null)},p(f,_){if(_&3){s=f[0];let m;for(m=0;m<s.length;m+=1){let c=ve(f,s,m);a[m]?a[m].p(c,_):(a[m]=be(c),a[m].c(),a[m].m(o,null))}for(;m<a.length;m+=1)a[m].d(1);a.length=s.length}k===(k=u(f,_))&&p?p.p(f,_):(p.d(1),p=k(f),p&&(p.c(),p.m(n,null)))},d(f){f&&w(t),te(a,f),p.d()}}}function be(i){let t,e,l=i[6].name+"",o,r,n,s,a,u;function k(){return i[4](i[6])}return{c(){t=v("li"),e=v("a"),o=E(l),s=D(),d(e,"class",r="break-text "+(i[1]===i[6]?"is-active":"")+" svelte-20lhhh"),d(e,"href",n="#"+i[6].name)},m(p,f){S(p,t,f),g(t,e),g(e,o),g(t,s),a||(u=H(e,"click",k),a=!0)},p(p,f){i=p,f&1&&l!==(l=i[6].name+"")&&le(o,l),f&3&&r!==(r="break-text "+(i[1]===i[6]?"is-active":"")+" svelte-20lhhh")&&d(e,"class",r),f&1&&n!==(n="#"+i[6].name)&&d(e,"href",n)},d(p){p&&w(t),a=!1,u()}}}function Ae(i){let t;return{c(){t=v("p"),t.textContent="No diagram selected",d(t,"class","notification is-warning")},m(e,l){S(e,t,l)},p:C,d(e){e&&w(t)}}}function Le(i){let t,e,l,o,r,n,s,a,u,k,p,f,_,m;return{c(){t=v("div"),e=v("div"),l=v("div"),o=v("textarea"),s=D(),a=v("div"),u=v("a"),k=v("figure"),p=v("img"),d(o,"class","textarea"),o.readOnly=r=!0,o.value=n=i[1].uml,d(l,"class","control"),d(e,"class","field"),d(t,"class","block"),d(p,"class","diagram-image svelte-20lhhh"),U(p.src,f=i[1].image)||d(p,"src",f),d(p,"alt",_=i[1].name),d(k,"class","image"),d(u,"href",m=i[1].image),d(u,"target","_blank"),d(u,"rel","noreferrer"),d(a,"class","block")},m(c,b){S(c,t,b),g(t,e),g(e,l),g(l,o),S(c,s,b),S(c,a,b),g(a,u),g(u,k),g(k,p)},p(c,b){b&2&&n!==(n=c[1].uml)&&(o.value=n),b&2&&!U(p.src,f=c[1].image)&&d(p,"src",f),b&2&&_!==(_=c[1].name)&&d(p,"alt",_),b&2&&m!==(m=c[1].image)&&d(u,"href",m)},d(c){c&&w(t),c&&w(s),c&&w(a)}}}function Te(i){let t,e,l;function o(s,a){return s[0].length>0?Me:Ce}let r=o(i,-1),n=r(i);return{c(){t=v("div"),e=v("p"),e.innerHTML="<strong>Diagrams</strong>",l=D(),n.c(),d(e,"class","subtitle"),d(t,"class","box")},m(s,a){S(s,t,a),g(t,e),g(t,l),n.m(t,null)},p(s,[a]){r===(r=o(s,a))&&n?n.p(s,a):(n.d(1),n=r(s),n&&(n.c(),n.m(t,null)))},i:C,o:C,d(s){s&&w(t),n.d()}}}function qe(i,t,e){let l;q(i,R,u=>e(3,l=u));let{service:o=null}=t,r=[],n=null;function s(u,k){u&&k&&(e(0,r=I(u,k)),r.length>0&&e(1,n=r[0]))}let a=u=>{e(1,n=u)};return i.$$set=u=>{"service"in u&&e(2,o=u.service)},i.$$.update=()=>{if(i.$$.dirty&12)e:s(o,l)},[r,n,o,l,a]}var W=class extends F{constructor(t){super(),P(this,t,qe,Te,T,{service:2},Be)}},he=W;B();var Q=Oe(ye());function ke(i){let t,e,l;return{c(){t=v("div"),e=v("progress"),d(e,"class","progress is-info is-small"),e.value=i[2],d(e,"max",l=i[0].length),d(t,"class","block")},m(o,r){S(o,t,r),g(t,e)},p(o,r){r&4&&(e.value=o[2]),r&1&&l!==(l=o[0].length)&&d(e,"max",l)},d(o){o&&w(t)}}}function Pe(i){let t,e,l,o,r,n,s,a,u,k,p,f,_=i[1]&&i[2]>=0&&ke(i);return{c(){t=v("div"),e=v("div"),l=v("button"),o=E("Download selected service"),n=D(),s=v("button"),a=E("Download all services"),k=D(),_&&_.c(),d(l,"class",r="button is-primary "+(i[1]?"is-loading":"")),l.disabled=i[1],d(s,"class",u="button is-primary "+(i[1]?"is-loading":"")),s.disabled=i[1],d(e,"class","block"),d(t,"class","box")},m(m,c){S(m,t,c),g(t,e),g(e,l),g(l,o),g(e,n),g(e,s),g(s,a),g(t,k),_&&_.m(t,null),p||(f=[H(l,"click",i[3]),H(s,"click",i[4])],p=!0)},p(m,[c]){c&2&&r!==(r="button is-primary "+(m[1]?"is-loading":""))&&d(l,"class",r),c&2&&(l.disabled=m[1]),c&2&&u!==(u="button is-primary "+(m[1]?"is-loading":""))&&d(s,"class",u),c&2&&(s.disabled=m[1]),m[1]&&m[2]>=0?_?_.p(m,c):(_=ke(m),_.c(),_.m(t,null)):_&&(_.d(1),_=null)},i:C,o:C,d(m){m&&w(t),_&&_.d(),p=!1,x(f)}}}function Fe(i,t,e){let l;q(i,R,f=>e(7,l=f));let{apiName:o=""}=t,{services:r=[]}=t,{selectedService:n=null}=t,s=!1,a=-1;function u(f,_,m){return z(this,void 0,void 0,function*(){for(let c of _){f.file(G(`${c.name}.plantuml`),c.uml);let b=yield fetch(c.image);b.ok&&f.file(G(`${c.name}.${m}`),yield b.blob())}})}function k(){return z(this,void 0,void 0,function*(){if(e(1,s=!0),e(2,a=-1),n){let f=I(n,l),_=new Q.default;yield u(_,f,l.format),yield J(o,_)}e(1,s=!1)})}function p(){return z(this,void 0,void 0,function*(){if(e(1,s=!0),e(2,a=0),r.length>0){let f=new Q.default;for(let _ of r){let m=I(_,l);yield u(f,m,l.format),e(2,a++,a)}yield J(o,f)}e(1,s=!1)})}return i.$$set=f=>{"apiName"in f&&e(5,o=f.apiName),"services"in f&&e(0,r=f.services),"selectedService"in f&&e(6,n=f.selectedService)},[r,s,a,k,p,o,n]}var V=class extends F{constructor(t){super(),P(this,t,Fe,Pe,T,{apiName:5,services:0,selectedService:6})}},Se=V;function we(i){let t,e,l,o;function r(s){i[6](s)}let n={services:i[1],servicesSelectSize:1};return i[2]!==void 0&&(n.selectedService=i[2]),e=new _e({props:n}),re.push(()=>oe(e,"selectedService",r)),{c(){t=v("div"),M(e.$$.fragment),d(t,"class","box")},m(s,a){S(s,t,a),A(e,t,null),o=!0},p(s,a){let u={};a&2&&(u.services=s[1]),!l&&a&4&&(l=!0,u.selectedService=s[2],ne(()=>l=!1)),e.$set(u)},i(s){o||(N(e.$$.fragment,s),o=!0)},o(s){y(e.$$.fragment,s),o=!1},d(s){s&&w(t),L(e)}}}function De(i){let t,e,l,o;return t=new he({props:{service:i[2]}}),l=new Se({props:{apiName:i[0].getName(),selectedService:i[2],services:i[1]}}),{c(){M(t.$$.fragment),e=D(),M(l.$$.fragment)},m(r,n){A(t,r,n),S(r,e,n),A(l,r,n),o=!0},p(r,n){let s={};n&4&&(s.service=r[2]),t.$set(s);let a={};n&1&&(a.apiName=r[0].getName()),n&4&&(a.selectedService=r[2]),n&2&&(a.services=r[1]),l.$set(a)},i(r){o||(N(t.$$.fragment,r),N(l.$$.fragment,r),o=!0)},o(r){y(t.$$.fragment,r),y(l.$$.fragment,r),o=!1},d(r){L(t,r),r&&w(e),L(l,r)}}}function ze(i){let t,e,l,o,r,n,s,a,u,k,p,f,_,m;t=new me({props:{activePage:"apiToPlantUml"}}),n=new ge({}),n.$on("apiChange",i[5]);let c=i[1].length>0&&we(i);u=new de({props:{messages:i[3]}});let b=i[2]&&De(i);return _=new ae({}),{c(){M(t.$$.fragment),e=D(),l=v("div"),o=v("section"),o.innerHTML=`<div class="hero-body"><h1 class="title">Api to PlantUML</h1> 
      <p class="subtitle">Generate PlantUML diagram of REST API</p></div>`,r=D(),M(n.$$.fragment),s=D(),c&&c.c(),a=D(),M(u.$$.fragment),k=D(),b&&b.c(),f=D(),M(_.$$.fragment),d(o,"class","hero is-small"),d(l,"class",p="container "+(i[4].fluidLayout?"is-fluid":""))},m(h,O){A(t,h,O),S(h,e,O),S(h,l,O),g(l,o),g(l,r),A(n,l,null),g(l,s),c&&c.m(l,null),g(l,a),A(u,l,null),g(l,k),b&&b.m(l,null),S(h,f,O),A(_,h,O),m=!0},p(h,[O]){h[1].length>0?c?(c.p(h,O),O&2&&N(c,1)):(c=we(h),c.c(),N(c,1),c.m(l,a)):c&&(Z(),y(c,1,1,()=>{c=null}),j());let Y={};O&8&&(Y.messages=h[3]),u.$set(Y),h[2]?b?(b.p(h,O),O&4&&N(b,1)):(b=De(h),b.c(),N(b,1),b.m(l,null)):b&&(Z(),y(b,1,1,()=>{b=null}),j()),(!m||O&16&&p!==(p="container "+(h[4].fluidLayout?"is-fluid":"")))&&d(l,"class",p)},i(h){m||(N(t.$$.fragment,h),N(n.$$.fragment,h),N(c),N(u.$$.fragment,h),N(b),N(_.$$.fragment,h),m=!0)},o(h){y(t.$$.fragment,h),y(n.$$.fragment,h),y(c),y(u.$$.fragment,h),y(b),y(_.$$.fragment,h),m=!1},d(h){L(t,h),h&&w(e),h&&w(l),L(n),c&&c.d(),L(u),b&&b.d(),h&&w(f),L(_,h)}}}function Ee(i,t,e){let l;q(i,ue,k=>e(4,l=k));let o=null,r=[],n=null,s=[];function a(k){return z(this,void 0,void 0,function*(){try{e(0,o=null),e(1,r=[]),e(2,n=null),e(3,s=[]);let p=k.detail.apiObject;p&&(e(0,o=pe(p)),o.setModelsTitle(),yield o.resolveReferences(),e(1,r=o.getServices()),r.length===0&&e(3,s=[...s,"Warning: No services found"]))}catch(p){e(3,s=[...s,"Error: "+p.message])}})}ie(()=>{fe()}),se(()=>{ce()});function u(k){n=k,e(2,n)}return[o,r,n,s,l,a,u]}var X=class extends F{constructor(t){super(),P(this,t,Ee,ze,T,{})}},Ne=X;new Ne({target:document.body});$();
