// Project: https://github.com/marc0l92/api-tools
import{b as Z,c as se,d as re,e as ne,f as L}from"./chunk-2X67327I.js";import{a as ke}from"./chunk-FLQJDJUD.js";import{a as ie,g as oe,h as j,i as U,l as ae}from"./chunk-UW57SVLN.js";import{a as fe}from"./chunk-G2AWGRSA.js";import{c as q}from"./chunk-SVSPBHPD.js";import{D as x,F as ee,I as H,J as R,K as w,L as y,M as O,N as z,O as C,P as B,Q as T,R as te,S as le,g as he,h as Q,i as M,j as V,k as A,l as $,m as E,o as v,p as F,q as k,r as S,s as X,t as b,u as P,v as D,x as I,y as p,z as Y}from"./chunk-WFT76VMO.js";function Se(i){F(i,"svelte-20lhhh",".diagram-image.svelte-20lhhh{width:auto;max-width:100%}.break-text.svelte-20lhhh{word-break:break-all}")}function ce(i,e,t){let l=i.slice();return l[6]=e[t],l}function we(i){let e;return{c(){e=b("p"),e.textContent="The selected service has no request and no responses models",p(e,"class","notification is-warning")},m(t,l){k(t,e,l)},p:M,d(t){t&&S(e)}}}function De(i){let e,t,l,r,c,n,m=i[0],s=[];for(let o=0;o<m.length;o+=1)s[o]=me(ce(i,m,o));function u(o,f){return o[1]?Ne:ye}let h=u(i,-1),_=h(i);return{c(){e=b("div"),t=b("div"),l=b("aside"),r=b("ul");for(let o=0;o<s.length;o+=1)s[o].c();c=D(),n=b("div"),_.c(),p(r,"class","menu-list"),p(l,"class","menu"),p(t,"class","column is-one-third"),p(n,"class","column"),p(e,"class","columns")},m(o,f){k(o,e,f),v(e,t),v(t,l),v(l,r);for(let a=0;a<s.length;a+=1)s[a].m(r,null);v(e,c),v(e,n),_.m(n,null)},p(o,f){if(f&3){m=o[0];let a;for(a=0;a<m.length;a+=1){let d=ce(o,m,a);s[a]?s[a].p(d,f):(s[a]=me(d),s[a].c(),s[a].m(r,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=m.length}h===(h=u(o,f))&&_?_.p(o,f):(_.d(1),_=h(o),_&&(_.c(),_.m(n,null)))},d(o){o&&S(e),X(s,o),_.d()}}}function me(i){let e,t,l=i[6].name+"",r,c,n,m,s,u;function h(){return i[4](i[6])}return{c(){e=b("li"),t=b("a"),r=P(l),m=D(),p(t,"class",c="break-text "+(i[1]===i[6]?"is-active":"")+" svelte-20lhhh"),p(t,"href",n="#"+i[6].name)},m(_,o){k(_,e,o),v(e,t),v(t,r),v(e,m),s||(u=I(t,"click",h),s=!0)},p(_,o){i=_,o&1&&l!==(l=i[6].name+"")&&Y(r,l),o&3&&c!==(c="break-text "+(i[1]===i[6]?"is-active":"")+" svelte-20lhhh")&&p(t,"class",c),o&1&&n!==(n="#"+i[6].name)&&p(t,"href",n)},d(_){_&&S(e),s=!1,u()}}}function ye(i){let e;return{c(){e=b("p"),e.textContent="No diagram selected",p(e,"class","notification is-warning")},m(t,l){k(t,e,l)},p:M,d(t){t&&S(e)}}}function Ne(i){let e,t,l,r,c,n,m,s,u,h,_,o,f,a;return{c(){e=b("div"),t=b("div"),l=b("div"),r=b("textarea"),m=D(),s=b("div"),u=b("a"),h=b("figure"),_=b("img"),p(r,"class","textarea"),r.readOnly=c=!0,r.value=n=i[1].uml,p(l,"class","control"),p(t,"class","field"),p(e,"class","block"),p(_,"class","diagram-image svelte-20lhhh"),$(_.src,o=i[1].image)||p(_,"src",o),p(_,"alt",f=i[1].name),p(h,"class","image"),p(u,"href",a=i[1].image),p(u,"target","_blank"),p(u,"rel","noreferrer"),p(s,"class","block")},m(d,g){k(d,e,g),v(e,t),v(t,l),v(l,r),k(d,m,g),k(d,s,g),v(s,u),v(u,h),v(h,_)},p(d,g){g&2&&n!==(n=d[1].uml)&&(r.value=n),g&2&&!$(_.src,o=d[1].image)&&p(_,"src",o),g&2&&f!==(f=d[1].name)&&p(_,"alt",f),g&2&&a!==(a=d[1].image)&&p(u,"href",a)},d(d){d&&S(e),d&&S(m),d&&S(s)}}}function Oe(i){let e,t,l;function r(m,s){return m[0].length>0?De:we}let c=r(i,-1),n=c(i);return{c(){e=b("div"),t=b("p"),t.innerHTML="<strong>Diagrams</strong>",l=D(),n.c(),p(t,"class","subtitle"),p(e,"class","box")},m(m,s){k(m,e,s),v(e,t),v(e,l),n.m(e,null)},p(m,[s]){c===(c=r(m,s))&&n?n.p(m,s):(n.d(1),n=c(m),n&&(n.c(),n.m(e,null)))},i:M,o:M,d(m){m&&S(e),n.d()}}}function ze(i,e,t){let l;E(i,Z,u=>t(3,l=u));let{service:r=null}=e,c=[],n=null;function m(u,h){u&&h&&(t(0,c=L(u,h)),c.length>0&&t(1,n=c[0]))}let s=u=>{t(1,n=u)};return i.$$set=u=>{"service"in u&&t(2,r=u.service)},i.$$.update=()=>{if(i.$$.dirty&12){e:m(r,l)}},[c,n,r,l,s]}var G=class extends T{constructor(e){super(),B(this,e,ze,Oe,A,{service:2},Se)}},ue=G;var J=he(ke());function de(i){let e,t,l;return{c(){e=b("div"),t=b("progress"),p(t,"class","progress is-info is-small"),t.value=i[2],p(t,"max",l=i[0].length),p(e,"class","block")},m(r,c){k(r,e,c),v(e,t)},p(r,c){c&4&&(t.value=r[2]),c&1&&l!==(l=r[0].length)&&p(t,"max",l)},d(r){r&&S(e)}}}function Ce(i){let e,t,l,r,c,n,m,s,u,h,_,o,f=i[1]&&i[2]>=0&&de(i);return{c(){e=b("div"),t=b("div"),l=b("button"),r=P("Download selected service"),n=D(),m=b("button"),s=P("Download all services"),h=D(),f&&f.c(),p(l,"class",c="button is-primary "+(i[1]?"is-loading":"")),l.disabled=i[1],p(m,"class",u="button is-primary "+(i[1]?"is-loading":"")),m.disabled=i[1],p(t,"class","block"),p(e,"class","box")},m(a,d){k(a,e,d),v(e,t),v(t,l),v(l,r),v(t,n),v(t,m),v(m,s),v(e,h),f&&f.m(e,null),_||(o=[I(l,"click",i[3]),I(m,"click",i[4])],_=!0)},p(a,[d]){d&2&&c!==(c="button is-primary "+(a[1]?"is-loading":""))&&p(l,"class",c),d&2&&(l.disabled=a[1]),d&2&&u!==(u="button is-primary "+(a[1]?"is-loading":""))&&p(m,"class",u),d&2&&(m.disabled=a[1]),a[1]&&a[2]>=0?f?f.p(a,d):(f=de(a),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i:M,o:M,d(a){a&&S(e),f&&f.d(),_=!1,V(o)}}}function Me(i,e,t){let l;E(i,Z,o=>t(7,l=o));let{apiName:r=""}=e,{services:c=[]}=e,{selectedService:n=null}=e,m=!1,s=-1;function u(o,f,a){return q(this,void 0,void 0,function*(){for(let d of f){o.file(j(`${d.name}.plantuml`),d.uml);let g=yield fetch(d.image);g.ok&&o.file(j(`${d.name}.${a}`),yield g.blob())}})}function h(){return q(this,void 0,void 0,function*(){if(t(1,m=!0),t(2,s=-1),n){let o=L(n,l),f=new J.default;yield u(f,o,l.format),yield U(r,f)}t(1,m=!1)})}function _(){return q(this,void 0,void 0,function*(){if(t(1,m=!0),t(2,s=0),c.length>0){let o=new J.default;for(let f of c){let a=L(f,l);yield u(o,a,l.format),t(2,s++,s)}yield U(r,o)}t(1,m=!1)})}return i.$$set=o=>{"apiName"in o&&t(5,r=o.apiName),"services"in o&&t(0,c=o.services),"selectedService"in o&&t(6,n=o.selectedService)},[c,m,s,h,_,r,n]}var W=class extends T{constructor(e){super(),B(this,e,Me,Ce,A,{apiName:5,services:0,selectedService:6})}},pe=W;function Ae(i){F(i,"svelte-1gzs1yt",".hero.is-small.svelte-1gzs1yt .hero-body.svelte-1gzs1yt{padding-left:0;padding-right:0}")}function _e(i){let e,t,l;return t=new oe({props:{services:i[1],servicesSelectSize:1}}),t.$on("serviceSelect",i[5]),{c(){e=b("div"),O(t.$$.fragment),p(e,"class","box")},m(r,c){k(r,e,c),z(t,e,null),l=!0},p(r,c){let n={};c&2&&(n.services=r[1]),t.$set(n)},i(r){l||(w(t.$$.fragment,r),l=!0)},o(r){y(t.$$.fragment,r),l=!1},d(r){r&&S(e),C(t)}}}function ge(i){let e,t;return e=new fe({props:{messages:i[3]}}),{c(){O(e.$$.fragment)},m(l,r){z(e,l,r),t=!0},p(l,r){let c={};r&8&&(c.messages=l[3]),e.$set(c)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){y(e.$$.fragment,l),t=!1},d(l){C(e,l)}}}function ve(i){let e,t,l,r,c,n,m;return e=new ue({props:{service:i[2]}}),r=new ne({}),n=new pe({props:{apiName:i[0].getName(),selectedService:i[2],services:i[1]}}),{c(){O(e.$$.fragment),t=D(),l=b("div"),O(r.$$.fragment),c=D(),O(n.$$.fragment),p(l,"class","box")},m(s,u){z(e,s,u),k(s,t,u),k(s,l,u),z(r,l,null),k(s,c,u),z(n,s,u),m=!0},p(s,u){let h={};u&4&&(h.service=s[2]),e.$set(h);let _={};u&1&&(_.apiName=s[0].getName()),u&4&&(_.selectedService=s[2]),u&2&&(_.services=s[1]),n.$set(_)},i(s){m||(w(e.$$.fragment,s),w(r.$$.fragment,s),w(n.$$.fragment,s),m=!0)},o(s){y(e.$$.fragment,s),y(r.$$.fragment,s),y(n.$$.fragment,s),m=!1},d(s){C(e,s),s&&S(t),s&&S(l),C(r),s&&S(c),C(n,s)}}}function Be(i){let e,t,l,r,c,n,m,s,u,h,_,o;e=new le({props:{activePage:"apiToPlantuml"}}),n=new ae({}),n.$on("apiChange",i[4]);let f=i[1].length>0&&_e(i),a=i[3].length>0&&ge(i),d=i[2]&&ve(i);return _=new te({}),{c(){O(e.$$.fragment),t=D(),l=b("div"),r=b("section"),r.innerHTML=`<div class="hero-body svelte-1gzs1yt"><h1 class="title">Api to PlantUML</h1> 
      <p class="subtitle">Generate PlantUML diagram of REST API</p></div>`,c=D(),O(n.$$.fragment),m=D(),f&&f.c(),s=D(),a&&a.c(),u=D(),d&&d.c(),h=D(),O(_.$$.fragment),p(r,"class","hero is-small svelte-1gzs1yt"),p(l,"class","container")},m(g,N){z(e,g,N),k(g,t,N),k(g,l,N),v(l,r),v(l,c),z(n,l,null),v(l,m),f&&f.m(l,null),v(l,s),a&&a.m(l,null),v(l,u),d&&d.m(l,null),k(g,h,N),z(_,g,N),o=!0},p(g,[N]){g[1].length>0?f?(f.p(g,N),N&2&&w(f,1)):(f=_e(g),f.c(),w(f,1),f.m(l,s)):f&&(H(),y(f,1,1,()=>{f=null}),R()),g[3].length>0?a?(a.p(g,N),N&8&&w(a,1)):(a=ge(g),a.c(),w(a,1),a.m(l,u)):a&&(H(),y(a,1,1,()=>{a=null}),R()),g[2]?d?(d.p(g,N),N&4&&w(d,1)):(d=ve(g),d.c(),w(d,1),d.m(l,null)):d&&(H(),y(d,1,1,()=>{d=null}),R())},i(g){o||(w(e.$$.fragment,g),w(n.$$.fragment,g),w(f),w(a),w(d),w(_.$$.fragment,g),o=!0)},o(g){y(e.$$.fragment,g),y(n.$$.fragment,g),y(f),y(a),y(d),y(_.$$.fragment,g),o=!1},d(g){C(e,g),g&&S(t),g&&S(l),C(n),f&&f.d(),a&&a.d(),d&&d.d(),g&&S(h),C(_,g)}}}function Te(i,e,t){let l=null,r=[],c=null,n=[];function m(u){return q(this,void 0,void 0,function*(){try{t(0,l=null),t(1,r=[]),t(2,c=null),t(3,n=[]);let h=u.detail.apiObject;h&&(t(0,l=ie(h)),l.setModelsTitle(),yield l.resolveReferences(),t(1,r=l.getServices()),r.length===0&&t(3,n=[...n,"Warning: No services found"]))}catch(h){t(3,n=[...n,"Error: "+h.message])}})}function s(u){t(2,c=r[u.detail.selectedServiceIndex])}return x(()=>{se()}),ee(()=>{re()}),[l,r,c,n,m,s]}var K=class extends T{constructor(e){super(),B(this,e,Te,Be,A,{},Ae)}},be=K;new be({target:document.body});Q();
