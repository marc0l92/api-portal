// Project: https://github.com/marc0l92/api-tools
import{a as se,b as z,c as re,d as q}from"./chunk-A2DKCZRZ.js";import{a as we}from"./chunk-5ZCGFGNV.js";import{a as ie,e as ne,f as oe,g as ae,h as Z,i as j,l as fe}from"./chunk-JHRYXG3H.js";import{a as ce}from"./chunk-ZDKY77FE.js";import{c as M}from"./chunk-SVSPBHPD.js";import{C as x,E as ee,H as F,I as G,J as w,K as D,L as N,M as A,N as T,O as E,P as I,Q as te,R as le,g as Se,h as Q,i as B,j as V,k as C,l as H,m as L,n as v,o as U,p as k,q as S,r as X,s as b,t as P,u as O,w as R,x as _,y as $}from"./chunk-LBFDNQDQ.js";function Oe(i){U(i,"svelte-20lhhh",".diagram-image.svelte-20lhhh{width:auto;max-width:100%}.break-text.svelte-20lhhh{word-break:break-all}")}function me(i,e,t){let l=i.slice();return l[6]=e[t],l}function De(i){let e;return{c(){e=b("p"),e.textContent="The selected service has no request and no responses models",_(e,"class","notification is-warning")},m(t,l){k(t,e,l)},p:B,d(t){t&&S(e)}}}function ye(i){let e,t,l,r,c,o,f=i[0],s=[];for(let n=0;n<f.length;n+=1)s[n]=ue(me(i,f,n));function d(n,m){return n[1]?Ae:Ne}let h=d(i,-1),u=h(i);return{c(){e=b("div"),t=b("div"),l=b("aside"),r=b("ul");for(let n=0;n<s.length;n+=1)s[n].c();c=O(),o=b("div"),u.c(),_(r,"class","menu-list"),_(l,"class","menu"),_(t,"class","column is-one-third"),_(o,"class","column"),_(e,"class","columns")},m(n,m){k(n,e,m),v(e,t),v(t,l),v(l,r);for(let a=0;a<s.length;a+=1)s[a].m(r,null);v(e,c),v(e,o),u.m(o,null)},p(n,m){if(m&3){f=n[0];let a;for(a=0;a<f.length;a+=1){let p=me(n,f,a);s[a]?s[a].p(p,m):(s[a]=ue(p),s[a].c(),s[a].m(r,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=f.length}h===(h=d(n,m))&&u?u.p(n,m):(u.d(1),u=h(n),u&&(u.c(),u.m(o,null)))},d(n){n&&S(e),X(s,n),u.d()}}}function ue(i){let e,t,l=i[6].name+"",r,c,o,f,s,d;function h(){return i[4](i[6])}return{c(){e=b("li"),t=b("a"),r=P(l),f=O(),_(t,"class",c="break-text "+(i[1]===i[6]?"is-active":"")+" svelte-20lhhh"),_(t,"href",o="#"+i[6].name)},m(u,n){k(u,e,n),v(e,t),v(t,r),v(e,f),s||(d=R(t,"click",h),s=!0)},p(u,n){i=u,n&1&&l!==(l=i[6].name+"")&&$(r,l),n&3&&c!==(c="break-text "+(i[1]===i[6]?"is-active":"")+" svelte-20lhhh")&&_(t,"class",c),n&1&&o!==(o="#"+i[6].name)&&_(t,"href",o)},d(u){u&&S(e),s=!1,d()}}}function Ne(i){let e;return{c(){e=b("p"),e.textContent="No diagram selected",_(e,"class","notification is-warning")},m(t,l){k(t,e,l)},p:B,d(t){t&&S(e)}}}function Ae(i){let e,t,l,r,c,o,f,s,d,h,u,n,m,a;return{c(){e=b("div"),t=b("div"),l=b("div"),r=b("textarea"),f=O(),s=b("div"),d=b("a"),h=b("figure"),u=b("img"),_(r,"class","textarea"),r.readOnly=c=!0,r.value=o=i[1].uml,_(l,"class","control"),_(t,"class","field"),_(e,"class","block"),_(u,"class","diagram-image svelte-20lhhh"),H(u.src,n=i[1].image)||_(u,"src",n),_(u,"alt",m=i[1].name),_(h,"class","image"),_(d,"href",a=i[1].image),_(d,"target","_blank"),_(d,"rel","noreferrer"),_(s,"class","block")},m(p,g){k(p,e,g),v(e,t),v(t,l),v(l,r),k(p,f,g),k(p,s,g),v(s,d),v(d,h),v(h,u)},p(p,g){g&2&&o!==(o=p[1].uml)&&(r.value=o),g&2&&!H(u.src,n=p[1].image)&&_(u,"src",n),g&2&&m!==(m=p[1].name)&&_(u,"alt",m),g&2&&a!==(a=p[1].image)&&_(d,"href",a)},d(p){p&&S(e),p&&S(f),p&&S(s)}}}function Te(i){let e,t,l;function r(f,s){return f[0].length>0?ye:De}let c=r(i,-1),o=c(i);return{c(){e=b("div"),t=b("p"),t.innerHTML="<strong>Diagrams</strong>",l=O(),o.c(),_(t,"class","subtitle"),_(e,"class","box")},m(f,s){k(f,e,s),v(e,t),v(e,l),o.m(e,null)},p(f,[s]){c===(c=r(f,s))&&o?o.p(f,s):(o.d(1),o=c(f),o&&(o.c(),o.m(e,null)))},i:B,o:B,d(f){f&&S(e),o.d()}}}function Be(i,e,t){let l;L(i,z,d=>t(3,l=d));let{service:r=null}=e,c=[],o=null;function f(d,h){d&&h&&(t(0,c=q(d,h)),c.length>0&&t(1,o=c[0]))}let s=d=>{t(1,o=d)};return i.$$set=d=>{"service"in d&&t(2,r=d.service)},i.$$.update=()=>{if(i.$$.dirty&12){e:f(r,l)}},[c,o,r,l,s]}var J=class extends I{constructor(e){super(),E(this,e,Be,Te,C,{service:2},Oe)}},de=J;var K=Se(we());function pe(i){let e,t,l;return{c(){e=b("div"),t=b("progress"),_(t,"class","progress is-info is-small"),t.value=i[2],_(t,"max",l=i[0].length),_(e,"class","block")},m(r,c){k(r,e,c),v(e,t)},p(r,c){c&4&&(t.value=r[2]),c&1&&l!==(l=r[0].length)&&_(t,"max",l)},d(r){r&&S(e)}}}function ze(i){let e,t,l,r,c,o,f,s,d,h,u,n,m=i[1]&&i[2]>=0&&pe(i);return{c(){e=b("div"),t=b("div"),l=b("button"),r=P("Download selected service"),o=O(),f=b("button"),s=P("Download all services"),h=O(),m&&m.c(),_(l,"class",c="button is-primary "+(i[1]?"is-loading":"")),l.disabled=i[1],_(f,"class",d="button is-primary "+(i[1]?"is-loading":"")),f.disabled=i[1],_(t,"class","block"),_(e,"class","box")},m(a,p){k(a,e,p),v(e,t),v(t,l),v(l,r),v(t,o),v(t,f),v(f,s),v(e,h),m&&m.m(e,null),u||(n=[R(l,"click",i[3]),R(f,"click",i[4])],u=!0)},p(a,[p]){p&2&&c!==(c="button is-primary "+(a[1]?"is-loading":""))&&_(l,"class",c),p&2&&(l.disabled=a[1]),p&2&&d!==(d="button is-primary "+(a[1]?"is-loading":""))&&_(f,"class",d),p&2&&(f.disabled=a[1]),a[1]&&a[2]>=0?m?m.p(a,p):(m=pe(a),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},i:B,o:B,d(a){a&&S(e),m&&m.d(),u=!1,V(n)}}}function Ce(i,e,t){let l;L(i,z,n=>t(7,l=n));let{apiName:r=""}=e,{services:c=[]}=e,{selectedService:o=null}=e,f=!1,s=-1;function d(n,m,a){return M(this,void 0,void 0,function*(){for(let p of m){n.file(Z(`${p.name}.plantuml`),p.uml);let g=yield fetch(p.image);g.ok&&n.file(Z(`${p.name}.${a}`),yield g.blob())}})}function h(){return M(this,void 0,void 0,function*(){if(t(1,f=!0),t(2,s=-1),o){let n=q(o,l),m=new K.default;yield d(m,n,l.format),yield j(r,m)}t(1,f=!1)})}function u(){return M(this,void 0,void 0,function*(){if(t(1,f=!0),t(2,s=0),c.length>0){let n=new K.default;for(let m of c){let a=q(m,l);yield d(n,a,l.format),t(2,s++,s)}yield j(r,n)}t(1,f=!1)})}return i.$$set=n=>{"apiName"in n&&t(5,r=n.apiName),"services"in n&&t(0,c=n.services),"selectedService"in n&&t(6,o=n.selectedService)},[c,f,s,h,u,r,o]}var W=class extends I{constructor(e){super(),E(this,e,Ce,ze,C,{apiName:5,services:0,selectedService:6})}},_e=W;function Le(i){U(i,"svelte-1gzs1yt",".hero.is-small.svelte-1gzs1yt .hero-body.svelte-1gzs1yt{padding-left:0;padding-right:0}")}function ge(i){let e,t,l;return t=new ne({props:{services:i[1],servicesSelectSize:1}}),t.$on("serviceSelect",i[5]),{c(){e=b("div"),N(t.$$.fragment),_(e,"class","box")},m(r,c){k(r,e,c),A(t,e,null),l=!0},p(r,c){let o={};c&2&&(o.services=r[1]),t.$set(o)},i(r){l||(w(t.$$.fragment,r),l=!0)},o(r){D(t.$$.fragment,r),l=!1},d(r){r&&S(e),T(t)}}}function ve(i){let e,t;return e=new ce({props:{messages:i[3]}}),{c(){N(e.$$.fragment)},m(l,r){A(e,l,r),t=!0},p(l,r){let c={};r&8&&(c.messages=l[3]),e.$set(c)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}function be(i){let e,t,l,r,c,o,f;return e=new de({props:{service:i[2]}}),r=new re({}),o=new _e({props:{apiName:i[0].getName(),selectedService:i[2],services:i[1]}}),{c(){N(e.$$.fragment),t=O(),l=b("div"),N(r.$$.fragment),c=O(),N(o.$$.fragment),_(l,"class","box")},m(s,d){A(e,s,d),k(s,t,d),k(s,l,d),A(r,l,null),k(s,c,d),A(o,s,d),f=!0},p(s,d){let h={};d&4&&(h.service=s[2]),e.$set(h);let u={};d&1&&(u.apiName=s[0].getName()),d&4&&(u.selectedService=s[2]),d&2&&(u.services=s[1]),o.$set(u)},i(s){f||(w(e.$$.fragment,s),w(r.$$.fragment,s),w(o.$$.fragment,s),f=!0)},o(s){D(e.$$.fragment,s),D(r.$$.fragment,s),D(o.$$.fragment,s),f=!1},d(s){T(e,s),s&&S(t),s&&S(l),T(r),s&&S(c),T(o,s)}}}function Ee(i){let e,t,l,r,c,o,f,s,d,h,u,n;e=new le({props:{activePage:"apiToPlantuml"}}),o=new fe({}),o.$on("apiChange",i[4]);let m=i[1].length>0&&ge(i),a=i[3].length>0&&ve(i),p=i[2]&&be(i);return u=new te({}),{c(){N(e.$$.fragment),t=O(),l=b("div"),r=b("section"),r.innerHTML=`<div class="hero-body svelte-1gzs1yt"><h1 class="title">Api to PlantUML</h1> 
      <p class="subtitle">Generate PlantUML diagram of REST API</p></div>`,c=O(),N(o.$$.fragment),f=O(),m&&m.c(),s=O(),a&&a.c(),d=O(),p&&p.c(),h=O(),N(u.$$.fragment),_(r,"class","hero is-small svelte-1gzs1yt"),_(l,"class","container")},m(g,y){A(e,g,y),k(g,t,y),k(g,l,y),v(l,r),v(l,c),A(o,l,null),v(l,f),m&&m.m(l,null),v(l,s),a&&a.m(l,null),v(l,d),p&&p.m(l,null),k(g,h,y),A(u,g,y),n=!0},p(g,[y]){g[1].length>0?m?(m.p(g,y),y&2&&w(m,1)):(m=ge(g),m.c(),w(m,1),m.m(l,s)):m&&(F(),D(m,1,1,()=>{m=null}),G()),g[3].length>0?a?(a.p(g,y),y&8&&w(a,1)):(a=ve(g),a.c(),w(a,1),a.m(l,d)):a&&(F(),D(a,1,1,()=>{a=null}),G()),g[2]?p?(p.p(g,y),y&4&&w(p,1)):(p=be(g),p.c(),w(p,1),p.m(l,null)):p&&(F(),D(p,1,1,()=>{p=null}),G())},i(g){n||(w(e.$$.fragment,g),w(o.$$.fragment,g),w(m),w(a),w(p),w(u.$$.fragment,g),n=!0)},o(g){D(e.$$.fragment,g),D(o.$$.fragment,g),D(m),D(a),D(p),D(u.$$.fragment,g),n=!1},d(g){T(e,g),g&&S(t),g&&S(l),T(o),m&&m.d(),a&&a.d(),p&&p.d(),g&&S(h),T(u,g)}}}var he="apiToPlantuml.diagramsBuilderOptions";function Ie(i,e,t){let l;L(i,z,u=>t(7,l=u));let r=null,c=[],o=null,f=[],s=null;function d(u){return M(this,void 0,void 0,function*(){try{t(0,r=null),t(1,c=[]),t(2,o=null),t(3,f=[]);let n=u.detail.apiObject;n&&(t(0,r=ie(n)),r.setModelsTitle(),yield r.resolveReferences(),t(1,c=r.getServices()),c.length===0&&t(3,f=[...f,"Warning: No services found"]))}catch(n){t(3,f=[...f,"Error: "+n.message])}})}function h(u){t(2,o=c[u.detail.selectedServiceIndex])}return x(()=>{z.set(ae(he,se)),s=z.subscribe(()=>{oe(he,l)})}),ee(()=>{s()}),[r,c,o,f,d,h]}var Y=class extends I{constructor(e){super(),E(this,e,Ie,Ee,C,{},Le)}},ke=Y;new ke({target:document.body});Q();
