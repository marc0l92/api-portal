// Project: https://github.com/marc0l92/api-tools
import{a as ee,b as te}from"./chunk-IX5ZU7N4.js";import{g as ne,h as se,i as oe}from"./chunk-IRWPGEHB.js";import"./chunk-PX42LIMP.js";import{a as x}from"./chunk-4ST3GK6U.js";import{$ as J,A as F,B as G,C as g,D as q,E as v,G as D,I as h,J as K,T as Q,U,V as k,W as O,X as N,Y as P,Z as j,_ as E,aa as X,da as L,h as w,la as Y,m as V,ma as Z,n as M,p as I,r as W,x as m,y as z,z as y}from"./chunk-AC34EKQT.js";w();w();w();w();function ie(s,n){let e=JSON.parse(JSON.stringify(s.toJson()));for(let t of n)if(!t.keep){let i=t.data;i.getPath()in e.paths&&(i.getMethod()in e.paths[i.getPath()]&&delete e.paths[i.getPath()][i.getMethod()],Object.keys(e.paths[i.getPath()]).filter(r=>r!=="parameters").length===0&&delete e.paths[i.getPath()])}switch(ee(e)){case 2:A(e,e.parameters,"#/parameters"),A(e,e.responses,"#/responses"),A(e,e.definitions,"#/definitions");break;case 3:e.components&&(A(e,e.components.parameters,"#/components/parameters"),A(e,e.components.headers,"#/components/headers"),A(e,e.components.callbacks,"#/components/callbacks"),A(e,e.components.requestBodies,"#/components/requestBodies"),A(e,e.components.responses,"#/components/responses"),A(e,e.components.schemas,"#/components/schemas"));break}return e}var A=(s,n,e)=>{if(n){let t=!0;for(;t;){t=!1;let i=JSON.stringify(s);for(let r in n){let o=`"$ref":"${e}/${r}"`;i.indexOf(o)==-1&&(delete n[r],t=!0)}}}};function me(s){let n,e,t,i,r,o,a;return{c(){n=g("div"),e=g("div"),t=g("button"),i=q("Download Api"),h(t,"class",r="button is-primary "+(s[0]?"is-loading":"")),t.disabled=s[0],h(e,"class","block"),h(n,"class","box")},m(c,l){y(c,n,l),m(n,e),m(e,t),m(t,i),o||(a=D(t,"click",s[1]),o=!0)},p(c,[l]){l&1&&r!==(r="button is-primary "+(c[0]?"is-loading":""))&&h(t,"class",r),l&1&&(t.disabled=c[0])},i:M,o:M,d(c){c&&F(n),o=!1,a()}}}function ue(s,n,e){let{api:t=null}=n,{servicesFilter:i=[]}=n,r=!1;function o(){return L(this,void 0,void 0,function*(){e(0,r=!0);let a=ie(t,i);se(`${t.getName()}.json`,ne(a)),e(0,r=!1)})}return s.$$set=a=>{"api"in a&&e(2,t=a.api),"servicesFilter"in a&&e(3,i=a.servicesFilter)},[r,o,t,i]}var B=class extends J{constructor(n){super(),E(this,n,ue,me,I,{api:2,servicesFilter:3})}},re=B;function de(s){z(s,"svelte-1ghsbhp",".menu-list.svelte-1ghsbhp label.svelte-1ghsbhp:hover{background-color:#f5f5f5;color:#363636}.menu-list.svelte-1ghsbhp label.svelte-1ghsbhp{border-radius:2px;color:#4a4a4a;display:block;padding:0.5em 0.75em}")}function le(s,n,e){let t=s.slice();return t[6]=n[e],t[7]=n,t[8]=e,t}function ae(s){let n,e,t,i,r=s[1],o=[];for(let a=0;a<r.length;a+=1)o[a]=pe(le(s,r,a));return{c(){n=g("div"),e=g("p"),e.innerHTML="<strong>Services to keep</strong>",t=v(),i=g("ul");for(let a=0;a<o.length;a+=1)o[a].c();h(e,"class","subtitle"),h(i,"class","menu-list svelte-1ghsbhp"),h(n,"class","box")},m(a,c){y(a,n,c),m(n,e),m(n,t),m(n,i);for(let l=0;l<o.length;l+=1)o[l].m(i,null)},p(a,c){if(c&2){r=a[1];let l;for(l=0;l<r.length;l+=1){let u=le(a,r,l);o[l]?o[l].p(u,c):(o[l]=pe(u),o[l].c(),o[l].m(i,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=r.length}},d(a){a&&F(n),G(o,a)}}}function pe(s){let n,e,t,i,r=s[6].data.getName()+"",o,a,c,l;function u(){s[5].call(t,s[7],s[8])}return{c(){n=g("li"),e=g("label"),t=g("input"),i=v(),o=q(r),a=v(),h(t,"type","checkbox"),h(e,"class","checkbox svelte-1ghsbhp")},m(b,S){y(b,n,S),m(n,e),m(e,t),t.checked=s[6].keep,m(e,i),m(e,o),m(n,a),c||(l=D(t,"change",u),c=!0)},p(b,S){s=b,S&2&&(t.checked=s[6].keep),S&2&&r!==(r=s[6].data.getName()+"")&&K(o,r)},d(b){b&&F(n),c=!1,l()}}}function ce(s){let n,e;return n=new re({props:{api:s[0],servicesFilter:s[1]}}),{c(){N(n.$$.fragment)},m(t,i){P(n,t,i),e=!0},p(t,i){let r={};i&1&&(r.api=t[0]),i&2&&(r.servicesFilter=t[1]),n.$set(r)},i(t){e||(k(n.$$.fragment,t),e=!0)},o(t){O(n.$$.fragment,t),e=!1},d(t){j(n,t)}}}function he(s){let n,e,t,i,r,o,a,c,l,u,b,S,$,C;n=new Z({props:{activePage:"apiServicesExtraction"}}),o=new oe({}),o.$on("apiChange",s[4]);let d=s[1].length>0&&ae(s);l=new x({props:{messages:s[2]}});let f=s[0]&&s[1].length>0&&ce(s);return $=new X({}),{c(){N(n.$$.fragment),e=v(),t=g("div"),i=g("section"),i.innerHTML=`<div class="hero-body"><h1 class="title">Api Services Extraction</h1> 
      <p class="subtitle">Remove some of the services from an api document</p></div>`,r=v(),N(o.$$.fragment),a=v(),d&&d.c(),c=v(),N(l.$$.fragment),u=v(),f&&f.c(),S=v(),N($.$$.fragment),h(i,"class","hero is-small"),h(t,"class",b="container "+(s[3].fluidLayout?"is-fluid":""))},m(p,_){P(n,p,_),y(p,e,_),y(p,t,_),m(t,i),m(t,r),P(o,t,null),m(t,a),d&&d.m(t,null),m(t,c),P(l,t,null),m(t,u),f&&f.m(t,null),y(p,S,_),P($,p,_),C=!0},p(p,[_]){p[1].length>0?d?d.p(p,_):(d=ae(p),d.c(),d.m(t,c)):d&&(d.d(1),d=null);let R={};_&4&&(R.messages=p[2]),l.$set(R),p[0]&&p[1].length>0?f?(f.p(p,_),_&3&&k(f,1)):(f=ce(p),f.c(),k(f,1),f.m(t,null)):f&&(Q(),O(f,1,1,()=>{f=null}),U()),(!C||_&8&&b!==(b="container "+(p[3].fluidLayout?"is-fluid":"")))&&h(t,"class",b)},i(p){C||(k(n.$$.fragment,p),k(o.$$.fragment,p),k(l.$$.fragment,p),k(f),k($.$$.fragment,p),C=!0)},o(p){O(n.$$.fragment,p),O(o.$$.fragment,p),O(l.$$.fragment,p),O(f),O($.$$.fragment,p),C=!1},d(p){j(n,p),p&&F(e),p&&F(t),j(o),d&&d.d(),j(l),f&&f.d(),p&&F(S),j($,p)}}}function ge(s,n,e){let t;W(s,Y,l=>e(3,t=l));let i=null,r=[],o=[];function a(l){return L(this,void 0,void 0,function*(){try{e(0,i=null),e(1,r=[]),e(2,o=[]);let u=l.detail.apiObject;u&&(e(0,i=te(u)),e(1,r=i.getServices().map(b=>({data:b,keep:!0}))),r.length===0&&e(2,o=[...o,"Warning: No services found"]))}catch(u){e(2,o=[...o,"Error: "+u.message])}})}function c(l,u){l[u].keep=this.checked,e(1,r)}return[i,r,o,t,a,c]}var H=class extends J{constructor(n){super(),E(this,n,ge,he,I,{},de)}},fe=H;new fe({target:document.body});V();
