// Project: https://github.com/marc0l92/api-tools
import{c as Y,d as Z,h as x,i as ee,j as te}from"./chunk-R23O2H5G.js";import"./chunk-Q35CXRW4.js";import{c as J,d as X}from"./chunk-6CMAXDGJ.js";import{$ as E,A as $,B as y,C as W,D as d,E as I,F as _,H as q,J as h,K as z,T as G,U as K,V as A,W as F,X as O,Y as N,Z as P,_ as D,aa as Q,ba as U,h as w,n as R,o as M,q as C,y as m,z as V}from"./chunk-3HQ6FKE7.js";w();w();w();w();function ne(o,n){let e=JSON.parse(JSON.stringify(o.toJson()));for(let t of n)if(!t.keep){let s=t.data;s.getPath()in e.paths&&(s.getMethod()in e.paths[s.getPath()]&&delete e.paths[s.getPath()][s.getMethod()],Object.keys(e.paths[s.getPath()]).filter(r=>r!=="parameters").length===0&&delete e.paths[s.getPath()])}switch(Y(e)){case 2:S(e,e.parameters,"#/parameters"),S(e,e.responses,"#/responses"),S(e,e.definitions,"#/definitions");break;case 3:e.components&&(S(e,e.components.parameters,"#/components/parameters"),S(e,e.components.headers,"#/components/headers"),S(e,e.components.callbacks,"#/components/callbacks"),S(e,e.components.requestBodies,"#/components/requestBodies"),S(e,e.components.responses,"#/components/responses"),S(e,e.components.schemas,"#/components/schemas"));break}return e}var S=(o,n,e)=>{if(n){let t=!0;for(;t;){t=!1;let s=JSON.stringify(o);for(let r in n){let l=`"$ref":"${e}/${r}"`;s.indexOf(l)==-1&&(delete n[r],t=!0)}}}};function pe(o){let n,e,t,s,r,l,a;return{c(){n=d("div"),e=d("div"),t=d("button"),s=I("Download Api"),h(t,"class",r="button is-primary "+(o[0]?"is-loading":"")),t.disabled=o[0],h(e,"class","block"),h(n,"class","box")},m(c,i){$(c,n,i),m(n,e),m(e,t),m(t,s),l||(a=q(t,"click",o[1]),l=!0)},p(c,[i]){i&1&&r!==(r="button is-primary "+(c[0]?"is-loading":""))&&h(t,"class",r),i&1&&(t.disabled=c[0])},i:M,o:M,d(c){c&&y(n),l=!1,a()}}}function ce(o,n,e){let{api:t=null}=n,{servicesFilter:s=[]}=n,r=!1;function l(){return J(this,void 0,void 0,function*(){e(0,r=!0);let a=ne(t,s);ee(`${t.getName()}.json`,x(a)),e(0,r=!1)})}return o.$$set=a=>{"api"in a&&e(2,t=a.api),"servicesFilter"in a&&e(3,s=a.servicesFilter)},[r,l,t,s]}var B=class extends E{constructor(n){super(),D(this,n,ce,pe,C,{api:2,servicesFilter:3})}},se=B;function fe(o){V(o,"svelte-1ghsbhp",".menu-list.svelte-1ghsbhp label.svelte-1ghsbhp:hover{background-color:#f5f5f5;color:#363636}.menu-list.svelte-1ghsbhp label.svelte-1ghsbhp{border-radius:2px;color:#4a4a4a;display:block;padding:0.5em 0.75em}")}function oe(o,n,e){let t=o.slice();return t[5]=n[e],t[6]=n,t[7]=e,t}function re(o){let n,e,t,s,r=o[1],l=[];for(let a=0;a<r.length;a+=1)l[a]=ie(oe(o,r,a));return{c(){n=d("div"),e=d("p"),e.innerHTML="<strong>Services to keep</strong>",t=_(),s=d("ul");for(let a=0;a<l.length;a+=1)l[a].c();h(e,"class","subtitle"),h(s,"class","menu-list svelte-1ghsbhp"),h(n,"class","box")},m(a,c){$(a,n,c),m(n,e),m(n,t),m(n,s);for(let i=0;i<l.length;i+=1)l[i].m(s,null)},p(a,c){if(c&2){r=a[1];let i;for(i=0;i<r.length;i+=1){let v=oe(a,r,i);l[i]?l[i].p(v,c):(l[i]=ie(v),l[i].c(),l[i].m(s,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=r.length}},d(a){a&&y(n),W(l,a)}}}function ie(o){let n,e,t,s,r=o[5].data.getName()+"",l,a,c,i;function v(){o[4].call(t,o[6],o[7])}return{c(){n=d("li"),e=d("label"),t=d("input"),s=_(),l=I(r),a=_(),h(t,"type","checkbox"),h(e,"class","checkbox svelte-1ghsbhp")},m(k,g){$(k,n,g),m(n,e),m(e,t),t.checked=o[5].keep,m(e,s),m(e,l),m(n,a),c||(i=q(t,"change",v),c=!0)},p(k,g){o=k,g&2&&(t.checked=o[5].keep),g&2&&r!==(r=o[5].data.getName()+"")&&z(l,r)},d(k){k&&y(n),c=!1,i()}}}function le(o){let n,e;return n=new se({props:{api:o[0],servicesFilter:o[1]}}),{c(){O(n.$$.fragment)},m(t,s){N(n,t,s),e=!0},p(t,s){let r={};s&1&&(r.api=t[0]),s&2&&(r.servicesFilter=t[1]),n.$set(r)},i(t){e||(A(n.$$.fragment,t),e=!0)},o(t){F(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function me(o){let n,e,t,s,r,l,a,c,i,v,k,g,j;n=new U({props:{activePage:"apiServicesExtraction"}}),l=new te({}),l.$on("apiChange",o[3]);let u=o[1].length>0&&re(o);i=new X({props:{messages:o[2]}});let f=o[0]&&o[1].length>0&&le(o);return g=new Q({}),{c(){O(n.$$.fragment),e=_(),t=d("div"),s=d("section"),s.innerHTML=`<div class="hero-body"><h1 class="title">Api Services Extraction</h1> 
      <p class="subtitle">Remove some of the services from an api document</p></div>`,r=_(),O(l.$$.fragment),a=_(),u&&u.c(),c=_(),O(i.$$.fragment),v=_(),f&&f.c(),k=_(),O(g.$$.fragment),h(s,"class","hero is-small"),h(t,"class","container")},m(p,b){N(n,p,b),$(p,e,b),$(p,t,b),m(t,s),m(t,r),N(l,t,null),m(t,a),u&&u.m(t,null),m(t,c),N(i,t,null),m(t,v),f&&f.m(t,null),$(p,k,b),N(g,p,b),j=!0},p(p,[b]){p[1].length>0?u?u.p(p,b):(u=re(p),u.c(),u.m(t,c)):u&&(u.d(1),u=null);let L={};b&4&&(L.messages=p[2]),i.$set(L),p[0]&&p[1].length>0?f?(f.p(p,b),b&3&&A(f,1)):(f=le(p),f.c(),A(f,1),f.m(t,null)):f&&(G(),F(f,1,1,()=>{f=null}),K())},i(p){j||(A(n.$$.fragment,p),A(l.$$.fragment,p),A(i.$$.fragment,p),A(f),A(g.$$.fragment,p),j=!0)},o(p){F(n.$$.fragment,p),F(l.$$.fragment,p),F(i.$$.fragment,p),F(f),F(g.$$.fragment,p),j=!1},d(p){P(n,p),p&&y(e),p&&y(t),P(l),u&&u.d(),P(i),f&&f.d(),p&&y(k),P(g,p)}}}function ue(o,n,e){let t=null,s=[],r=[];function l(c){return J(this,void 0,void 0,function*(){try{e(0,t=null),e(1,s=[]),e(2,r=[]);let i=c.detail.apiObject;i&&(e(0,t=Z(i)),e(1,s=t.getServices().map(v=>({data:v,keep:!0}))),s.length===0&&e(2,r=[...r,"Warning: No services found"]))}catch(i){e(2,r=[...r,"Error: "+i.message])}})}function a(c,i){c[i].keep=this.checked,e(1,s)}return[t,s,r,l,a]}var H=class extends E{constructor(n){super(),D(this,n,ue,me,C,{},fe)}},ae=H;new ae({target:document.body});R();
