// Project: https://github.com/marc0l92/api-portal
import{a as te,b as se,c as ie}from"./chunk-3B6PI6CB.js";import{a as _e}from"./chunk-IODKKE4G.js";import{b as ee}from"./chunk-23VFA6K4.js";import{d as x,g as re,h as oe,i as ne,k as le,l as fe}from"./chunk-WOM4D4HB.js";import"./chunk-S5WBLC6J.js";import{a as $}from"./chunk-RLHUHBW6.js";import{$ as S,A as _,C as T,D as A,F as k,G as q,H as C,J as E,M as v,W as G,Y as K,Z as H,_ as R,aa as N,ba as Q,ca as O,da as F,ea as L,fa as I,g as ve,ga as M,h as P,ha as U,ka as z,n as B,o as j,p as J,r as D,sa as V,t as y,ta as Y}from"./chunk-PPXJKI2J.js";P();P();P();var ue=ve(_e());function ae(o){let s,e,t;return{c(){s=k("div"),e=k("progress"),v(e,"class","progress is-info is-small"),e.value=o[2],v(e,"max",t=o[0].length),v(s,"class","block")},m(r,n){T(r,s,n),_(s,e)},p(r,n){n&4&&(e.value=r[2]),n&1&&t!==(t=r[0].length)&&v(e,"max",t)},d(r){r&&A(s)}}}function be(o){let s,e,t,r,n,u,i,g,m,b,f,w,a=o[1]&&o[2]>=0&&ae(o);return{c(){s=k("div"),e=k("div"),t=k("button"),r=q("Download selected service"),u=C(),i=k("button"),g=q("Download all services"),b=C(),a&&a.c(),v(t,"class",n="button is-primary "+(o[1]?"is-loading":"")),t.disabled=o[1],v(i,"class",m="button is-primary "+(o[1]?"is-loading":"")),i.disabled=o[1],v(e,"class","block"),v(s,"class","box")},m(p,c){T(p,s,c),_(s,e),_(e,t),_(t,r),_(e,u),_(e,i),_(i,g),_(s,b),a&&a.m(s,null),f||(w=[E(t,"click",o[3]),E(i,"click",o[4])],f=!0)},p(p,[c]){c&2&&n!==(n="button is-primary "+(p[1]?"is-loading":""))&&v(t,"class",n),c&2&&(t.disabled=p[1]),c&2&&m!==(m="button is-primary "+(p[1]?"is-loading":""))&&v(i,"class",m),c&2&&(i.disabled=p[1]),p[1]&&p[2]>=0?a?a.p(p,c):(a=ae(p),a.c(),a.m(s,null)):a&&(a.d(1),a=null)},i:j,o:j,d(p){p&&A(s),a&&a.d(),f=!1,J(w)}}}function Se(o,s,e){let{apiName:t=""}=s,{services:r=[]}=s,{selectedService:n=null}=s,u=!1,i=-1;function g(f){let w=te(f),a=se(w);return ie(a)}function m(){return z(this,void 0,void 0,function*(){if(e(1,u=!0),e(2,i=-1),n){let f=g(n);le(`${n.getName()}.ods`,ne(f))}e(1,u=!1)})}function b(){return z(this,void 0,void 0,function*(){if(e(1,u=!0),e(2,i=0),r.length>0){let f=new ue.default;for(let w of r){let a=g(w);a&&f.file(re(`${w.getName()}.ods`),a),e(2,i++,i)}yield oe(t,f)}e(1,u=!1)})}return o.$$set=f=>{"apiName"in f&&e(5,t=f.apiName),"services"in f&&e(0,r=f.services),"selectedService"in f&&e(6,n=f.selectedService)},[r,u,i,m,b,t,n]}var W=class extends M{constructor(s){super(),I(this,s,Se,be,D,{apiName:5,services:0,selectedService:6})}},me=W;function pe(o){let s,e,t,r;function n(i){o[6](i)}let u={services:o[1],servicesSelectSize:8};return o[2]!==void 0&&(u.selectedService=o[2]),e=new ee({props:u}),G.push(()=>Q(e,"selectedService",n)),{c(){s=k("div"),O(e.$$.fragment),v(s,"class","box")},m(i,g){T(i,s,g),F(e,s,null),r=!0},p(i,g){let m={};g&2&&(m.services=i[1]),!t&&g&4&&(t=!0,m.selectedService=i[2],K(()=>t=!1)),e.$set(m)},i(i){r||(S(e.$$.fragment,i),r=!0)},o(i){N(e.$$.fragment,i),r=!1},d(i){i&&A(s),L(e)}}}function de(o){let s,e;return s=new me({props:{selectedService:o[2],services:o[1],apiName:o[0].getName()}}),{c(){O(s.$$.fragment)},m(t,r){F(s,t,r),e=!0},p(t,r){let n={};r&4&&(n.selectedService=t[2]),r&2&&(n.services=t[1]),r&1&&(n.apiName=t[0].getName()),s.$set(n)},i(t){e||(S(s.$$.fragment,t),e=!0)},o(t){N(s.$$.fragment,t),e=!1},d(t){L(s,t)}}}function he(o){let s,e,t,r,n,u,i,g,m,b,f,w,a,p;s=new Y({props:{activePage:"apiToSpreadsheet"}}),u=new fe({}),u.$on("apiChange",o[5]);let c=o[1].length>0&&pe(o);m=new $({props:{messages:o[3]}});let d=o[2]&&de(o);return a=new U({}),{c(){O(s.$$.fragment),e=C(),t=k("div"),r=k("section"),r.innerHTML=`<div class="hero-body"><h1 class="title">Api to Spreadsheet</h1> 
      <p class="subtitle">Convert OpenAPI/Swagger file to flat Spreadsheets</p></div>`,n=C(),O(u.$$.fragment),i=C(),c&&c.c(),g=C(),O(m.$$.fragment),b=C(),d&&d.c(),w=C(),O(a.$$.fragment),v(r,"class","hero is-small"),v(t,"class",f="container "+(o[4].fluidLayout?"is-fluid":""))},m(l,h){F(s,l,h),T(l,e,h),T(l,t,h),_(t,r),_(t,n),F(u,t,null),_(t,i),c&&c.m(t,null),_(t,g),F(m,t,null),_(t,b),d&&d.m(t,null),T(l,w,h),F(a,l,h),p=!0},p(l,[h]){l[1].length>0?c?(c.p(l,h),h&2&&S(c,1)):(c=pe(l),c.c(),S(c,1),c.m(t,g)):c&&(H(),N(c,1,1,()=>{c=null}),R());let Z={};h&8&&(Z.messages=l[3]),m.$set(Z),l[2]?d?(d.p(l,h),h&4&&S(d,1)):(d=de(l),d.c(),S(d,1),d.m(t,null)):d&&(H(),N(d,1,1,()=>{d=null}),R()),(!p||h&16&&f!==(f="container "+(l[4].fluidLayout?"is-fluid":"")))&&v(t,"class",f)},i(l){p||(S(s.$$.fragment,l),S(u.$$.fragment,l),S(c),S(m.$$.fragment,l),S(d),S(a.$$.fragment,l),p=!0)},o(l){N(s.$$.fragment,l),N(u.$$.fragment,l),N(c),N(m.$$.fragment,l),N(d),N(a.$$.fragment,l),p=!1},d(l){L(s,l),l&&A(e),l&&A(t),L(u),c&&c.d(),L(m),d&&d.d(),l&&A(w),L(a,l)}}}function we(o,s,e){let t;y(o,V,b=>e(4,t=b));let r=null,n=[],u=null,i=[];function g(b){return z(this,void 0,void 0,function*(){try{e(3,i=[]),e(0,r=null),e(1,n=[]),e(2,u=null);let f=b.detail.apiObject;f&&(e(0,r=x(f)),yield r.resolveReferences(),e(1,n=r.getServices()),n.length===0&&e(3,i=[...i,"Warning: No services found"]))}catch(f){e(3,i=[...i,"Error: "+f.message])}})}function m(b){u=b,e(2,u)}return[r,n,u,i,t,g,m]}var X=class extends M{constructor(s){super(),I(this,s,we,he,D,{})}},ge=X;new ge({target:document.body});B();
