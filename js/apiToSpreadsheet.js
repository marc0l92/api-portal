// Project: https://github.com/marc0l92/api-tools
import{a as G,b as K,c as Q}from"./chunk-UFIRH2WJ.js";import{a as ce}from"./chunk-FLQJDJUD.js";import{a as J,g as $,h as U,i as V,j as Y,k as x,l as ee}from"./chunk-VCSESU2A.js";import{a as te}from"./chunk-G2AWGRSA.js";import{c as F}from"./chunk-SVSPBHPD.js";import{I as P,J as D,K as p,L as b,M as y,N as A,O as T,P as M,Q as O,R as Z,S as B,g as ae,h as R,i as j,j as W,k as I,o as d,p as X,q as z,r as C,t as k,u as q,v as N,x as E,y as g}from"./chunk-WFT76VMO.js";var re=ae(ce());function se(n){let s,t,e;return{c(){s=k("div"),t=k("progress"),g(t,"class","progress is-info is-small"),t.value=n[2],g(t,"max",e=n[0].length),g(s,"class","block")},m(r,o){z(r,s,o),d(s,t)},p(r,o){o&4&&(t.value=r[2]),o&1&&e!==(e=r[0].length)&&g(t,"max",e)},d(r){r&&C(s)}}}function me(n){let s,t,e,r,o,a,u,w,v,_,m,S,i=n[1]&&n[2]>=0&&se(n);return{c(){s=k("div"),t=k("div"),e=k("button"),r=q("Download selected service"),a=N(),u=k("button"),w=q("Download all services"),_=N(),i&&i.c(),g(e,"class",o="button is-primary "+(n[1]?"is-loading":"")),e.disabled=n[1],g(u,"class",v="button is-primary "+(n[1]?"is-loading":"")),u.disabled=n[1],g(t,"class","block"),g(s,"class","box")},m(l,c){z(l,s,c),d(s,t),d(t,e),d(e,r),d(t,a),d(t,u),d(u,w),d(s,_),i&&i.m(s,null),m||(S=[E(e,"click",n[3]),E(u,"click",n[4])],m=!0)},p(l,[c]){c&2&&o!==(o="button is-primary "+(l[1]?"is-loading":""))&&g(e,"class",o),c&2&&(e.disabled=l[1]),c&2&&v!==(v="button is-primary "+(l[1]?"is-loading":""))&&g(u,"class",v),c&2&&(u.disabled=l[1]),l[1]&&l[2]>=0?i?i.p(l,c):(i=se(l),i.c(),i.m(s,null)):i&&(i.d(1),i=null)},i:j,o:j,d(l){l&&C(s),i&&i.d(),m=!1,W(S)}}}function ue(n,s,t){let{apiName:e=""}=s,{services:r=[]}=s,{selectedService:o=null}=s,a=!1,u=-1;function w(m){let S=G(m),i=K(S);return Q(i)}function v(){return F(this,void 0,void 0,function*(){if(t(1,a=!0),t(2,u=-1),o){let m=w(o);x(`${o.getName()}.ods`,Y(m))}t(1,a=!1)})}function _(){return F(this,void 0,void 0,function*(){if(t(1,a=!0),t(2,u=0),r.length>0){let m=new re.default;for(let S of r){let i=w(S);i&&m.file(U(`${S.getName()}.ods`),i),t(2,u++,u)}yield V(e,m)}t(1,a=!1)})}return n.$$set=m=>{"apiName"in m&&t(5,e=m.apiName),"services"in m&&t(0,r=m.services),"selectedService"in m&&t(6,o=m.selectedService)},[r,a,u,v,_,e,o]}var H=class extends O{constructor(s){super(),M(this,s,ue,me,I,{apiName:5,services:0,selectedService:6})}},ie=H;function pe(n){X(n,"svelte-1gzs1yt",".hero.is-small.svelte-1gzs1yt .hero-body.svelte-1gzs1yt{padding-left:0;padding-right:0}")}function ne(n){let s,t,e;return t=new $({props:{services:n[1],servicesSelectSize:8}}),t.$on("serviceSelect",n[5]),{c(){s=k("div"),y(t.$$.fragment),g(s,"class","box")},m(r,o){z(r,s,o),A(t,s,null),e=!0},p(r,o){let a={};o&2&&(a.services=r[1]),t.$set(a)},i(r){e||(p(t.$$.fragment,r),e=!0)},o(r){b(t.$$.fragment,r),e=!1},d(r){r&&C(s),T(t)}}}function oe(n){let s,t;return s=new te({props:{messages:n[3]}}),{c(){y(s.$$.fragment)},m(e,r){A(s,e,r),t=!0},p(e,r){let o={};r&8&&(o.messages=e[3]),s.$set(o)},i(e){t||(p(s.$$.fragment,e),t=!0)},o(e){b(s.$$.fragment,e),t=!1},d(e){T(s,e)}}}function le(n){let s,t;return s=new ie({props:{selectedService:n[2],services:n[1],apiName:n[0].getName()}}),{c(){y(s.$$.fragment)},m(e,r){A(s,e,r),t=!0},p(e,r){let o={};r&4&&(o.selectedService=e[2]),r&2&&(o.services=e[1]),r&1&&(o.apiName=e[0].getName()),s.$set(o)},i(e){t||(p(s.$$.fragment,e),t=!0)},o(e){b(s.$$.fragment,e),t=!1},d(e){T(s,e)}}}function de(n){let s,t,e,r,o,a,u,w,v,_,m,S;s=new B({props:{activePage:"apiToSpreadsheet"}}),a=new ee({}),a.$on("apiChange",n[4]);let i=n[1].length>0&&ne(n),l=n[3].length>0&&oe(n),c=n[2]&&le(n);return m=new Z({}),{c(){y(s.$$.fragment),t=N(),e=k("div"),r=k("section"),r.innerHTML=`<div class="hero-body svelte-1gzs1yt"><h1 class="title">Api to Spreadsheet</h1> 
      <p class="subtitle">Convert OpenAPI/Swagger file to flat Spreadsheets</p></div>`,o=N(),y(a.$$.fragment),u=N(),i&&i.c(),w=N(),l&&l.c(),v=N(),c&&c.c(),_=N(),y(m.$$.fragment),g(r,"class","hero is-small svelte-1gzs1yt"),g(e,"class","container")},m(f,h){A(s,f,h),z(f,t,h),z(f,e,h),d(e,r),d(e,o),A(a,e,null),d(e,u),i&&i.m(e,null),d(e,w),l&&l.m(e,null),d(e,v),c&&c.m(e,null),z(f,_,h),A(m,f,h),S=!0},p(f,[h]){f[1].length>0?i?(i.p(f,h),h&2&&p(i,1)):(i=ne(f),i.c(),p(i,1),i.m(e,w)):i&&(P(),b(i,1,1,()=>{i=null}),D()),f[3].length>0?l?(l.p(f,h),h&8&&p(l,1)):(l=oe(f),l.c(),p(l,1),l.m(e,v)):l&&(P(),b(l,1,1,()=>{l=null}),D()),f[2]?c?(c.p(f,h),h&4&&p(c,1)):(c=le(f),c.c(),p(c,1),c.m(e,null)):c&&(P(),b(c,1,1,()=>{c=null}),D())},i(f){S||(p(s.$$.fragment,f),p(a.$$.fragment,f),p(i),p(l),p(c),p(m.$$.fragment,f),S=!0)},o(f){b(s.$$.fragment,f),b(a.$$.fragment,f),b(i),b(l),b(c),b(m.$$.fragment,f),S=!1},d(f){T(s,f),f&&C(t),f&&C(e),T(a),i&&i.d(),l&&l.d(),c&&c.d(),f&&C(_),T(m,f)}}}function ge(n,s,t){let e=null,r=[],o=null,a=[];function u(v){return F(this,void 0,void 0,function*(){try{t(3,a=[]),t(0,e=null),t(1,r=[]),t(2,o=null);let _=v.detail.apiObject;_&&(t(0,e=J(_)),yield e.resolveReferences(),t(1,r=e.getServices()),r.length===0&&t(3,a=[...a,"Warning: No services found"]))}catch(_){t(3,a=[...a,"Error: "+_.message])}})}function w(v){t(2,o=r[v.detail.selectedServiceIndex])}return[e,r,o,a,u,w]}var L=class extends O{constructor(s){super(),M(this,s,ge,de,I,{},pe)}},fe=L;new fe({target:document.body});R();
