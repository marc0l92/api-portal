// Project: https://github.com/marc0l92/api-tools
import{a as Q,b as U,c as V}from"./chunk-4R4OJ2NQ.js";import{a as me}from"./chunk-QTVKIM3D.js";import{b as K}from"./chunk-GO65ATMP.js";import{d as G,e as Y,f as x,g as ee,i as te,j as se}from"./chunk-R23O2H5G.js";import"./chunk-Q35CXRW4.js";import{c as z,d as y}from"./chunk-6CMAXDGJ.js";import{$ as O,A as C,B as T,D as w,E as q,F as N,H as E,J as g,T as H,U as L,V as b,W as k,X as A,Y as F,Z as I,_ as M,aa as J,ba as $,g as ce,h as P,n as Z,o as j,p as B,q as D,y as d}from"./chunk-3HQ6FKE7.js";P();P();P();var oe=ce(me());function re(i){let s,t,e;return{c(){s=w("div"),t=w("progress"),g(t,"class","progress is-info is-small"),t.value=i[2],g(t,"max",e=i[0].length),g(s,"class","block")},m(r,o){C(r,s,o),d(s,t)},p(r,o){o&4&&(t.value=r[2]),o&1&&e!==(e=r[0].length)&&g(t,"max",e)},d(r){r&&T(s)}}}function ue(i){let s,t,e,r,o,f,u,S,p,_,m,v,c=i[1]&&i[2]>=0&&re(i);return{c(){s=w("div"),t=w("div"),e=w("button"),r=q("Download selected service"),f=N(),u=w("button"),S=q("Download all services"),_=N(),c&&c.c(),g(e,"class",o="button is-primary "+(i[1]?"is-loading":"")),e.disabled=i[1],g(u,"class",p="button is-primary "+(i[1]?"is-loading":"")),u.disabled=i[1],g(t,"class","block"),g(s,"class","box")},m(n,a){C(n,s,a),d(s,t),d(t,e),d(e,r),d(t,f),d(t,u),d(u,S),d(s,_),c&&c.m(s,null),m||(v=[E(e,"click",i[3]),E(u,"click",i[4])],m=!0)},p(n,[a]){a&2&&o!==(o="button is-primary "+(n[1]?"is-loading":""))&&g(e,"class",o),a&2&&(e.disabled=n[1]),a&2&&p!==(p="button is-primary "+(n[1]?"is-loading":""))&&g(u,"class",p),a&2&&(u.disabled=n[1]),n[1]&&n[2]>=0?c?c.p(n,a):(c=re(n),c.c(),c.m(s,null)):c&&(c.d(1),c=null)},i:j,o:j,d(n){n&&T(s),c&&c.d(),m=!1,B(v)}}}function pe(i,s,t){let{apiName:e=""}=s,{services:r=[]}=s,{selectedService:o=null}=s,f=!1,u=-1;function S(m){let v=Q(m),c=U(v);return V(c)}function p(){return z(this,void 0,void 0,function*(){if(t(1,f=!0),t(2,u=-1),o){let m=S(o);te(`${o.getName()}.ods`,ee(m))}t(1,f=!1)})}function _(){return z(this,void 0,void 0,function*(){if(t(1,f=!0),t(2,u=0),r.length>0){let m=new oe.default;for(let v of r){let c=S(v);c&&m.file(Y(`${v.getName()}.ods`),c),t(2,u++,u)}yield x(e,m)}t(1,f=!1)})}return i.$$set=m=>{"apiName"in m&&t(5,e=m.apiName),"services"in m&&t(0,r=m.services),"selectedService"in m&&t(6,o=m.selectedService)},[r,f,u,p,_,e,o]}var R=class extends O{constructor(s){super(),M(this,s,pe,ue,D,{apiName:5,services:0,selectedService:6})}},ne=R;function le(i){let s,t,e;return t=new K({props:{services:i[1],servicesSelectSize:8}}),t.$on("serviceSelect",i[5]),{c(){s=w("div"),A(t.$$.fragment),g(s,"class","box")},m(r,o){C(r,s,o),F(t,s,null),e=!0},p(r,o){let f={};o&2&&(f.services=r[1]),t.$set(f)},i(r){e||(b(t.$$.fragment,r),e=!0)},o(r){k(t.$$.fragment,r),e=!1},d(r){r&&T(s),I(t)}}}function fe(i){let s,t;return s=new ne({props:{selectedService:i[2],services:i[1],apiName:i[0].getName()}}),{c(){A(s.$$.fragment)},m(e,r){F(s,e,r),t=!0},p(e,r){let o={};r&4&&(o.selectedService=e[2]),r&2&&(o.services=e[1]),r&1&&(o.apiName=e[0].getName()),s.$set(o)},i(e){t||(b(s.$$.fragment,e),t=!0)},o(e){k(s.$$.fragment,e),t=!1},d(e){I(s,e)}}}function de(i){let s,t,e,r,o,f,u,S,p,_,m,v,c;s=new $({props:{activePage:"apiToSpreadsheet"}}),f=new se({}),f.$on("apiChange",i[4]);let n=i[1].length>0&&le(i);p=new y({props:{messages:i[3]}});let a=i[2]&&fe(i);return v=new J({}),{c(){A(s.$$.fragment),t=N(),e=w("div"),r=w("section"),r.innerHTML=`<div class="hero-body"><h1 class="title">Api to Spreadsheet</h1> 
      <p class="subtitle">Convert OpenAPI/Swagger file to flat Spreadsheets</p></div>`,o=N(),A(f.$$.fragment),u=N(),n&&n.c(),S=N(),A(p.$$.fragment),_=N(),a&&a.c(),m=N(),A(v.$$.fragment),g(r,"class","hero is-small"),g(e,"class","container")},m(l,h){F(s,l,h),C(l,t,h),C(l,e,h),d(e,r),d(e,o),F(f,e,null),d(e,u),n&&n.m(e,null),d(e,S),F(p,e,null),d(e,_),a&&a.m(e,null),C(l,m,h),F(v,l,h),c=!0},p(l,[h]){l[1].length>0?n?(n.p(l,h),h&2&&b(n,1)):(n=le(l),n.c(),b(n,1),n.m(e,S)):n&&(H(),k(n,1,1,()=>{n=null}),L());let X={};h&8&&(X.messages=l[3]),p.$set(X),l[2]?a?(a.p(l,h),h&4&&b(a,1)):(a=fe(l),a.c(),b(a,1),a.m(e,null)):a&&(H(),k(a,1,1,()=>{a=null}),L())},i(l){c||(b(s.$$.fragment,l),b(f.$$.fragment,l),b(n),b(p.$$.fragment,l),b(a),b(v.$$.fragment,l),c=!0)},o(l){k(s.$$.fragment,l),k(f.$$.fragment,l),k(n),k(p.$$.fragment,l),k(a),k(v.$$.fragment,l),c=!1},d(l){I(s,l),l&&T(t),l&&T(e),I(f),n&&n.d(),I(p),a&&a.d(),l&&T(m),I(v,l)}}}function ge(i,s,t){let e=null,r=[],o=null,f=[];function u(p){return z(this,void 0,void 0,function*(){try{t(3,f=[]),t(0,e=null),t(1,r=[]),t(2,o=null);let _=p.detail.apiObject;_&&(t(0,e=G(_)),yield e.resolveReferences(),t(1,r=e.getServices()),r.length===0&&t(3,f=[...f,"Warning: No services found"]))}catch(_){t(3,f=[...f,"Error: "+_.message])}})}function S(p){t(2,o=r[p.detail.selectedServiceIndex])}return[e,r,o,f,u,S]}var W=class extends O{constructor(s){super(),M(this,s,ge,de,D,{})}},ae=W;new ae({target:document.body});Z();
